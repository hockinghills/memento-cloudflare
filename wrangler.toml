name = "memento-mcp-worker"
main = "src/index.ts"
compatibility_date = "2025-11-30"
compatibility_flags = ["nodejs_compat"]

# Durable Objects configuration for stateful MCP sessions
migrations = [
  { tag = "v1", new_sqlite_classes = ["MementoMCP"] }
]

[durable_objects]
bindings = [
  { name = "MCP_OBJECT", class_name = "MementoMCP" }
]

# KV namespace for OAuth tokens
[[kv_namespaces]]
binding = "OAUTH_KV"
id = "8893cd7fdcd84638b11f7c9c9c39baf5"

[vars]
NEO4J_URI = "https://2430c020.databases.neo4j.io/db/neo4j/query/v2"

# Secrets (set via wrangler secret put)
# NEO4J_USER
# NEO4J_PASSWORD
# VOYAGE_API_KEY
# OAUTH_CLIENT_ID
# OAUTH_CLIENT_SECRET
# COOKIE_ENCRYPTION_KEY
